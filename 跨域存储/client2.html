<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>client-2</title>
</head>
<body>

	<button onclick="handleSend()">send-2</button>
	<button onclick="handleGet()">get-2</button>

	<iframe src="http://localhost:6000/hub.html" frameborder="0" id="hub"></iframe>
	<script>
		const $ = id => document.querySelector(id)
		const ifameWin = $('#hub').contentWindow

		let count = 0
		function handleSend () {
			let data = {
				method: 'setItem',
				content: `来自 client-2 消息：${count++}`,
			}
			ifameWin.postMessage(data, '*')
		}

		function handleGet () {
			let data = {
				method: 'getItem',
			}
			ifameWin.postMessage(data, '*')
		}

		window.addEventListener('message', function (e) {
			console.log('client 2 获取到数据啦：', e.data)
		})
	</script>
</body>
</html>
